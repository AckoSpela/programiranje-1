<!DOCTYPE html>
<html>
  <head>
    <title>Uvod v Haskell</title>
    <meta charset="utf-8">
    <style>
      body {
        font-family: 'Avenir Next';
      }
      h3 {
        font-weight: normal;
      }
      .remark-code, .remark-inline-code {
        font-family: 'Menlo';
      }
      .remark-code {
        font-size: 1.5em;
      }
      .small-code .remark-code {
        font-size: 1.3em;
      }
      ol, ul {
        font-size: 1.5em;
      }

      a.reveal {
        font-weight: bold;
      }

      a.reveal:hover {
        cursor:pointer;
      }

      .question {
        /*color: white;*/
        /*background-color: black;*/
      }

      .red {
        color: red;
      }

      .green {
        color: green;
      }

      .consecutive pre {
        margin-top: 0;
        margin-bottom: 0;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Programiranje 1

### 6. november 2015

---

class: center, middle

## Haskell in resnični svet

---

class: center, middle

## Moduli

---

### Iz modulov lahko uvozimo vse funkcije

```haskell
import NekModul

mojaFunkcija x =
    let y = nekaFunkcija x in
    x + y

```

```python
from nek_modul import *

def moja_funkcija(x):
    y = neka_funkcija(x)
    return x + y
```

---

### Iz modulov lahko uvozimo posamezne funkcije

```haskell
import NekModul (nekaFunkcija)

mojaFunkcija x =
    let y = nekaFunkcija x in
    x + y

```

```python
from nek_modul import neka_funkcija

def moja_funkcija(x):
    y = neka_funkcija(x)
    return x + y
```

---

### Module lahko uvozimo kvalificirano

```haskell
import qualified NekModul

mojaFunkcija x =
    let y = NekModul.nekaFunkcija x in
    x + y

```

```python
import nek_modul

def moja_funkcija(x):
    y = nek_modul.neka_funkcija(x)
    return x + y
```

---

### Kvalificirane module lahko preimenujemo

```haskell
import qualified NekModul as NM

mojaFunkcija x =
    let y = NM.nekaFunkcija x in
    x + y

```

```python
import nek_modul as nm

def moja_funkcija(x):
    y = nm.neka_funkcija(x)
    return x + y
```

---

### Definicija modula

```haskell
module Barva where

data Barva = Rdeca | Rumena | Modra
           | Druga String
           deriving (Eq, Show, Ord)

zmesaj :: Barva -> Barva -> Barva
zmesaj barva1 barva2 = ...

pomozna :: Barva -> Int
pomozna barva = ...
```

---

### Izvozimo lahko le nekatere vrednosti

```haskell
module Barva
    ( Barva(Rdeca, Rumena, Modra)
    , zmesaj
    ) where

data Barva = Rdeca | Rumena | Modra
           | Druga String
           deriving (Eq, Show, Ord)

zmesaj :: Barva -> Barva -> Barva
zmesaj barva1 barva2 = ...

pomozna :: Barva -> Int
pomozna barva = ...
```

---

class: center, middle

## Vhod & izhod

---

### Kakšen naj bo tip spodnjega programa?

<pre><code>
Kako ti je ime? <em>Matija</em>
Kako se pa pišeš? <em>Pretnar</em>
Pozdravljeni, Matija Pretnar!
</code></pre>
---

### Programi se izvedejo ob vnosu v konzolo

`test.hs`

```haskell
helloWorld = putStrLn "Hello, world!"

zivjoSvet = putStrLn "Živjo, svet!"
```

- - -

```
λ> :l test.hs
Ok, modules loaded: Main.

λ> zivjoSvet
Živjo, svet!

λ> helloWorld
Hello, world!
```

---

### `main` se izvede, če poženemo program, preveden z `ghc`

`test.hs`

```haskell
helloWorld = putStrLn "Hello, world!"

zivjoSvet = putStrLn "Živjo, svet!"
```

- - -

```
$ ghc --make test.hs
[1 of 1] Compiling Main

test.hs:1:1:
  The IO action ‘main’ is not defined
  in module ‘Main’
```

---

### `main` se izvede, če poženemo program, preveden z `ghc`

`test.hs`

```haskell
helloWorld = putStrLn "Hello, world!"

main = putStrLn "Živjo, svet!"
```

- - -

```
$ ghc --make test.hs
[1 of 1] Compiling Main
Linking test ...
$ ./test
Živjo, svet!
```

---

### `main` se izvede, če z `runghc` izvedemo program

`test.hs`

```haskell
helloWorld = putStrLn "Hello, world!"

main = putStrLn "Živjo, svet!"
```

- - -

```
$ runghc test.hs
Živjo, svet!
```
---

### Programe sestavljamo z zapisom `do`

```haskell
main = do
  putStrLn "Kako ti je ime?"
  ime <- getLine
  putStrLn $ "Živjo, " ++ ime ++ "!"
```

---

class: center, middle

## QuickCheck

---

class: center, middle

### Včasih si lastnosti programov ne želimo formalno dokazovati.

---

### QuickCheck pravilnost preverja na naključnih primerih.

```haskell
import Test.QuickCheck

povecaj :: [Int] -> [Int]
povecaj = map succ

prop_SumPovecaj :: [Int] -> Bool
prop_SumPovecaj xs =
  sum xs + length xs == sum (povecaj xs)

main = quickCheck prop_SumPovecaj
```

```
 +++ OK, passed 100 tests.
```

---

### QuickCheck pravilnost preverja na naključnih primerih.

```haskell
import Test.QuickCheck

povecaj :: [Int] -> [Int]
povecaj = map succ

prop_SumPovecaj :: [Int] -> Bool
prop_SumPovecaj xs =
  sum xs < sum (povecaj xs)

main = quickCheck prop_SumPovecaj
```

```
 *** Failed! Falsifiable (after 1 test):  
 []
```

---

class: small-code
### Polimorfne funkcije testiramo pri enem tipu.

```haskell
import Test.QuickCheck

prop_LenApp :: [Int] -> [Int] -> Bool
prop_LenApp xs ys =
  length (xs ++ ys) == length xs + length xs

main = quickCheck prop_LenApp
```

```
 *** Failed! Falsifiable
 (after 3 tests and 4 shrinks):    
 [0]
 []
```

---
class: small-code
### Polimorfne funkcije testiramo pri enem tipu.

```haskell
import Test.QuickCheck

prop_LenApp :: [Int] -> [Int] -> Bool
prop_LenApp xs ys =
  length (xs ++ ys) == length xs + length ys

main = quickCheck prop_LenApp
```

```
 +++ OK, passed 100 tests.
```

---

class: center, middle

### naslednjič...

# Iskalna drevesa

    </textarea>
    <script src="../js/jquery-1.11.3.min.js"></script>
    <script src="../js/remark-latest.min.js"></script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script>
      $(document).ready(function() { 
      
      $(".spoiler").hide();
      
      $('<a class="reveal">???</a>').insertBefore('.spoiler');

      $("a.reveal").click(function(){
        $(this).next().fadeIn(500);
        $(this).hide();
      });

    }); 
        var slideshow = remark.create({
        highlightLines: true
      });
    </script>
  </body>
</html>
